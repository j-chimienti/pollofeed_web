<template>
  <div class="delay-feeding" >
    <p style="font-size: 1.25rem">My Tokens</p>
    <div v-if="showFeedNow">
      <div @click="feed(showFeedNow)" class="row cursor-pointer justify-center">
        <svg
          width="186"
          height="77"
          viewBox="0 0 186 77"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_269_1508)">
            <path
              d="M185.562 23.1427V54.5009C185.562 66.9272 173.857 76.9779 159.437 76.9779H26.5628C12.143 76.9779 0.4375 66.8906 0.4375 54.5009V23.1427C0.4375 10.7164 12.143 0.629181 26.5628 0.629181H159.479C173.899 0.629181 185.562 10.7164 185.562 23.1427Z"
              fill="#91181D"
            />
            <path
              d="M156.341 74.1271H29.6592C16.1725 74.1271 5.18799 64.6977 5.18799 53.0389V24.5315C5.18799 12.9092 16.1301 3.47983 29.6592 3.47983H156.341C169.828 3.47983 180.813 12.9092 180.813 24.568V53.0754C180.813 64.6977 169.871 74.1271 156.341 74.1271Z"
              fill="url(#paint0_linear_269_1508)"
            />
            <path
              d="M154.535 70.9474H32.6024C20.0063 70.9474 9.82764 62.1394 9.82764 51.3212V26.3224C9.82764 15.4676 20.0487 6.69611 32.6024 6.69611H154.535C167.131 6.69611 177.309 15.5042 177.309 26.3224V51.3212C177.352 62.1394 167.131 70.9474 154.535 70.9474Z"
              fill="url(#paint1_linear_269_1508)"
            />
            <path
              d="M154.535 71.5778H32.6024C20.0063 71.5778 9.82764 62.7697 9.82764 51.9515V26.9527C9.82764 16.098 20.0487 7.32648 32.6024 7.32648H154.535C167.131 7.32648 177.309 16.1345 177.309 26.9527V51.9515C177.352 62.7697 167.131 71.5778 154.535 71.5778Z"
              fill="url(#paint2_linear_269_1508)"
            />
            <path
              opacity="0.45"
              d="M30.9734 18.1356H25.4176C23.806 18.1356 22.4912 17.0026 22.4912 15.6138C22.4912 14.2249 23.806 13.0919 25.4176 13.0919H30.9734C32.5851 13.0919 33.8998 14.2249 33.8998 15.6138C33.9422 17.0026 32.6275 18.1356 30.9734 18.1356Z"
              fill="white"
            />
            <path
              opacity="0.45"
              d="M56.2934 18.2818H41.2374C39.6258 18.2818 38.311 17.1489 38.311 15.76C38.311 14.3712 39.6258 13.2382 41.2374 13.2382H56.2934C57.905 13.2382 59.2198 14.3712 59.2198 15.76C59.2198 17.1489 57.905 18.2818 56.2934 18.2818Z"
              fill="white"
            />
            <path
              d="M50.9778 28.8996C50.9334 29.5958 50.8926 30.2845 50.8556 30.9658C50.8186 31.6471 50.7704 32.3359 50.7112 33.032L46.0012 33.2764V34.676H50.0891L49.867 38.1196L45.979 38.2307L46.0012 44.3626L40.3804 44.4737L40.7358 28.8996H50.9778ZM63.7525 35.7202C63.7525 36.3645 63.7081 37.0088 63.6192 37.6531C62.3528 37.7346 61.0939 37.8679 59.8423 38.053C58.5908 38.2307 57.3392 38.4085 56.0877 38.5862C56.2802 39.1194 56.5801 39.5452 56.9875 39.8637C57.4022 40.1821 57.8946 40.3413 58.4649 40.3413C58.7611 40.3413 59.0832 40.2858 59.4313 40.1747C59.7868 40.0636 60.1385 39.9266 60.4866 39.7637C60.8347 39.5934 61.1679 39.4119 61.4864 39.2194C61.8048 39.0268 62.0788 38.8528 62.3084 38.6973L61.7752 43.7405C61.4864 43.9627 61.1716 44.1515 60.831 44.307C60.4977 44.4626 60.1497 44.5884 59.7868 44.6847C59.4239 44.781 59.0573 44.8513 58.687 44.8958C58.3168 44.9402 57.9539 44.9624 57.5984 44.9624C56.8653 44.9624 56.1951 44.8625 55.5878 44.6625C54.9805 44.4626 54.4288 44.1848 53.9326 43.8294C53.4439 43.4665 53.0143 43.0407 52.6441 42.5519C52.2738 42.0631 51.9664 41.5299 51.7221 40.9523C51.4777 40.3747 51.2925 39.7637 51.1666 39.1194C51.0407 38.4751 50.9778 37.8234 50.9778 37.1643C50.9778 36.4756 51.0407 35.7869 51.1666 35.0982C51.2925 34.4094 51.4814 33.7466 51.7332 33.1097C51.9924 32.4729 52.3145 31.8841 52.6996 31.3435C53.0921 30.7955 53.5475 30.3178 54.0659 29.9105C54.5843 29.5032 55.1694 29.1848 55.8211 28.9552C56.4802 28.7256 57.2059 28.6108 57.9983 28.6108C58.6574 28.6108 59.2573 28.7034 59.7979 28.8885C60.3459 29.0663 60.831 29.3181 61.2531 29.6439C61.6826 29.9624 62.0529 30.3437 62.3639 30.7881C62.6824 31.2324 62.9416 31.7212 63.1415 32.2544C63.3489 32.7802 63.5007 33.3393 63.597 33.9318C63.7006 34.5168 63.7525 35.113 63.7525 35.7202ZM59.3091 35.1426C59.3091 34.9352 59.2869 34.7242 59.2425 34.5094C59.198 34.2872 59.124 34.0873 59.0203 33.9095C58.924 33.7318 58.7944 33.5874 58.6315 33.4763C58.4686 33.3578 58.2649 33.2986 58.0205 33.2986C57.7243 33.2986 57.4614 33.38 57.2318 33.543C57.0097 33.6985 56.8171 33.8984 56.6542 34.1428C56.4913 34.3798 56.358 34.639 56.2543 34.9204C56.1506 35.2018 56.0729 35.461 56.021 35.698L59.3091 35.387V35.1426ZM76.8826 35.7202C76.8826 36.3645 76.8382 37.0088 76.7493 37.6531C75.483 37.7346 74.224 37.8679 72.9725 38.053C71.7209 38.2307 70.4694 38.4085 69.2178 38.5862C69.4104 39.1194 69.7103 39.5452 70.1176 39.8637C70.5323 40.1821 71.0248 40.3413 71.595 40.3413C71.8913 40.3413 72.2134 40.2858 72.5615 40.1747C72.9169 40.0636 73.2687 39.9266 73.6168 39.7637C73.9648 39.5934 74.2981 39.4119 74.6165 39.2194C74.935 39.0268 75.209 38.8528 75.4386 38.6973L74.9053 43.7405C74.6165 43.9627 74.3018 44.1515 73.9611 44.307C73.6279 44.4626 73.2798 44.5884 72.9169 44.6847C72.5541 44.781 72.1875 44.8513 71.8172 44.8958C71.4469 44.9402 71.0841 44.9624 70.7286 44.9624C69.9954 44.9624 69.3252 44.8625 68.718 44.6625C68.1107 44.4626 67.559 44.1848 67.0628 43.8294C66.574 43.4665 66.1445 43.0407 65.7742 42.5519C65.4039 42.0631 65.0966 41.5299 64.8522 40.9523C64.6078 40.3747 64.4227 39.7637 64.2968 39.1194C64.1709 38.4751 64.108 37.8234 64.108 37.1643C64.108 36.4756 64.1709 35.7869 64.2968 35.0982C64.4227 34.4094 64.6115 33.7466 64.8633 33.1097C65.1225 32.4729 65.4447 31.8841 65.8298 31.3435C66.2223 30.7955 66.6777 30.3178 67.1961 29.9105C67.7145 29.5032 68.2995 29.1848 68.9512 28.9552C69.6103 28.7256 70.3361 28.6108 71.1285 28.6108C71.7876 28.6108 72.3874 28.7034 72.928 28.8885C73.4761 29.0663 73.9611 29.3181 74.3833 29.6439C74.8128 29.9624 75.1831 30.3437 75.4941 30.7881C75.8125 31.2324 76.0717 31.7212 76.2717 32.2544C76.479 32.7802 76.6309 33.3393 76.7271 33.9318C76.8308 34.5168 76.8826 35.113 76.8826 35.7202ZM72.4393 35.1426C72.4393 34.9352 72.4171 34.7242 72.3726 34.5094C72.3282 34.2872 72.2541 34.0873 72.1505 33.9095C72.0542 33.7318 71.9246 33.5874 71.7617 33.4763C71.5987 33.3578 71.3951 33.2986 71.1507 33.2986C70.8545 33.2986 70.5916 33.38 70.362 33.543C70.1398 33.6985 69.9473 33.8984 69.7844 34.1428C69.6214 34.3798 69.4881 34.639 69.3845 34.9204C69.2808 35.2018 69.203 35.461 69.1512 35.698L72.4393 35.387V35.1426ZM90.2017 35.8757C90.2017 36.9125 90.0684 37.8419 89.8018 38.664C89.5352 39.486 89.1612 40.2154 88.6798 40.8523C88.2058 41.4818 87.6393 42.0187 86.9802 42.463C86.3211 42.9074 85.5991 43.274 84.8141 43.5628C84.0291 43.8442 83.1922 44.0515 82.3036 44.1848C81.4223 44.3181 80.5151 44.3848 79.582 44.3848C79.2339 44.3848 78.8933 44.3774 78.56 44.3626C78.2268 44.3404 77.8861 44.3107 77.538 44.2737L77.8491 29.8105C78.6637 29.5513 79.5005 29.3699 80.3596 29.2662C81.226 29.1551 82.0851 29.0996 82.9367 29.0996C83.9957 29.0996 84.9696 29.2477 85.8583 29.5439C86.7469 29.8402 87.5134 30.2771 88.1577 30.8547C88.802 31.425 89.3019 32.1322 89.6573 32.9764C90.0202 33.8133 90.2017 34.7797 90.2017 35.8757ZM82.6479 40.1414C83.0923 40.0747 83.4959 39.9414 83.8587 39.7415C84.229 39.5341 84.5475 39.2823 84.8141 38.9861C85.0807 38.6825 85.2843 38.3418 85.425 37.9641C85.5731 37.579 85.6472 37.1717 85.6472 36.7422C85.6472 36.3201 85.6028 35.9276 85.5139 35.5647C85.425 35.1944 85.2806 34.876 85.0807 34.6094C84.8807 34.3354 84.6178 34.1206 84.292 33.9651C83.9661 33.8022 83.5662 33.7133 83.0923 33.6985L82.6479 40.1414ZM110.452 28.7663L109.653 43.8294L103.832 44.3626L100.721 36.2979L100.233 44.5181H95.2338L95.6337 28.7663L101.188 28.4997L105.031 36.4978L105.209 28.9441L110.452 28.7663ZM124.96 36.1868C124.96 36.8607 124.882 37.5124 124.727 38.1419C124.571 38.7639 124.345 39.349 124.049 39.897C123.76 40.445 123.405 40.9486 122.983 41.4077C122.568 41.8595 122.098 42.2483 121.572 42.5741C121.053 42.9 120.487 43.1555 119.872 43.3406C119.258 43.5183 118.606 43.6072 117.917 43.6072C117.251 43.6072 116.614 43.522 116.007 43.3517C115.407 43.1814 114.844 42.9444 114.318 42.6408C113.792 42.3297 113.315 41.9595 112.885 41.5299C112.463 41.093 112.1 40.6116 111.796 40.0858C111.5 39.5526 111.267 38.9824 111.097 38.3751C110.934 37.7679 110.852 37.1347 110.852 36.4756C110.852 35.8313 110.93 35.2018 111.085 34.5872C111.241 33.9651 111.463 33.38 111.752 32.832C112.048 32.284 112.404 31.7804 112.818 31.3213C113.233 30.8621 113.696 30.4659 114.207 30.1327C114.725 29.7994 115.284 29.5402 115.884 29.3551C116.484 29.17 117.117 29.0774 117.784 29.0774C118.858 29.0774 119.835 29.244 120.717 29.5773C121.605 29.9105 122.361 30.3882 122.983 31.0102C123.612 31.6249 124.097 32.3729 124.438 33.2542C124.786 34.128 124.96 35.1056 124.96 36.1868ZM120.028 36.4756C120.028 36.1572 119.98 35.8498 119.883 35.5536C119.795 35.25 119.661 34.9834 119.483 34.7538C119.306 34.5168 119.084 34.328 118.817 34.1873C118.558 34.0391 118.258 33.9651 117.917 33.9651C117.569 33.9651 117.258 34.028 116.984 34.1539C116.71 34.2798 116.473 34.4539 116.273 34.676C116.081 34.8908 115.932 35.1463 115.829 35.4425C115.725 35.7313 115.673 36.0387 115.673 36.3645C115.673 36.6755 115.718 36.9866 115.807 37.2976C115.895 37.6087 116.029 37.8901 116.206 38.1419C116.384 38.3937 116.603 38.5973 116.862 38.7528C117.128 38.9083 117.436 38.9861 117.784 38.9861C118.132 38.9861 118.443 38.9194 118.717 38.7861C118.998 38.6454 119.235 38.4603 119.428 38.2307C119.62 37.9937 119.769 37.7234 119.872 37.4198C119.976 37.1162 120.028 36.8014 120.028 36.4756ZM145.488 29.2773L142.889 44.2293L136.579 44.3626L135.224 36.8311L133.869 43.7849L127.559 44.0071L124.938 29.7217L130.447 29.2329L131.558 38.0086L133.047 29.8994H137.379L139.112 38.1196L140.001 28.7886L145.488 29.2773Z"
              fill="#8E1116"
            />
          </g>
          <defs>
            <linearGradient
              id="paint0_linear_269_1508"
              x1="93.004"
              y1="74.1303"
              x2="93.004"
              y2="3.48688"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="4.1e-07" stop-color="#F4E795" />
              <stop offset="0.2642" stop-color="#F4B331" />
              <stop offset="0.6307" stop-color="#F4B331" />
              <stop offset="0.6507" stop-color="#F4AD31" />
              <stop offset="0.8034" stop-color="#F48631" />
              <stop offset="0.9252" stop-color="#F46E31" />
              <stop offset="1" stop-color="#F46531" />
            </linearGradient>
            <linearGradient
              id="paint1_linear_269_1508"
              x1="93.5722"
              y1="5.54634"
              x2="93.5722"
              y2="74.9976"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="4.1e-07" stop-color="#F4E795" />
              <stop offset="0.2642" stop-color="#F4B331" />
              <stop offset="0.6307" stop-color="#F4B331" />
              <stop offset="0.6507" stop-color="#F4AD31" />
              <stop offset="0.8034" stop-color="#F48631" />
              <stop offset="0.9252" stop-color="#F46E31" />
              <stop offset="1" stop-color="#F46531" />
            </linearGradient>
            <linearGradient
              id="paint2_linear_269_1508"
              x1="93.5722"
              y1="6.17671"
              x2="93.5722"
              y2="75.628"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="4.1e-07" stop-color="#F4E795" />
              <stop offset="0.2642" stop-color="#F4B331" />
              <stop offset="0.6307" stop-color="#F4B331" />
              <stop offset="0.6507" stop-color="#F4AD31" />
              <stop offset="0.8034" stop-color="#F48631" />
              <stop offset="0.9252" stop-color="#F46E31" />
              <stop offset="1" stop-color="#F46531" />
            </linearGradient>
            <clipPath id="clip0_269_1508">
              <rect
                width="185.125"
                height="76.3487"
                fill="white"
                transform="translate(0.4375 0.629181)"
              />
            </clipPath>
          </defs>
        </svg>
      </div>
      <br />
      <br />
      <q-btn
        @click="SET_USE_TOKEN_NOW(null)"
        label="Use Later"
        class="red-btn"
      />
    </div>
    <div v-else>
      <div class="row flex justify-around">
        <div v-if="feedTokens?.length" class="col-md-8 q-pa-md feedTokens-container">
          <div
            class="row justify-between items-center"
            v-for="feedToken in feedTokens"
            :key="feedToken"
          >
            <div class="feedToken items-center q-pa-md">
              {{ feedToken }}
            </div>
            <div>
              <q-btn @click="feed(feedToken)" class="red-btn">Use</q-btn>
              <q-btn
                @click="removeToken(feedToken)"
                icon="fas fa-trash"
                class="red-btn"
              />
            </div>
          </div>
        </div>
        <div class="col-md-4 q-pl-md">
          <q-input
            v-model="manualFeedToken"
            clearable
            placeholder="enter token"
            outlined
          >
          </q-input>
          <div class="row q-my-md">
            <ButtonV3 label="use now" @click="manualFeed"></ButtonV3>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import { REMOVE_FEED_TOKEN } from "../store/mutations"
import AppMixin from "../mixins/AppMixin"
import ButtonV2 from "./ButtonV2"
import get from "lodash.get"
import ButtonV3 from "components/ButtonV3"

export default {
  name: "DelayFeeding",
  components: { ButtonV3, ButtonV2 },
  mixins: [AppMixin],
  data() {
    return { manualFeedToken: "", disabledBtn: false }
  },
  methods: {
    manualFeed() {
      const token = this.manualFeedToken.trim()
      return this.feed(token)
    },
    removeToken(feedToken) {
      let label = feedToken
      if (typeof feedToken === "object")
        label = get(feedToken, "label", "")
      if (label) return this.$store.commit(REMOVE_FEED_TOKEN, label)
    },
    feed(token) {
      return this.DELAY_FEEDING(token)
    },
  },
}
</script>

<style scoped>

.feedToken {
  min-width: 108px;
  height: 37px;
  border: 2px solid #8E1116;
  border-radius: 50px;
}

.red-btn {
  color: white;
  /* Red Pigment/700 */

  background: #8e1116;
  border-radius: 55px;
}

  .feedTokens-container {

    width: 411px;
    height: 159px;

    overflow-y: scroll;

    /* Bright Saffron/50 */

    background: #FFFAE7;
    /* Red Pigment/700 */

    border: 2px solid #8E1116;
    border-radius: 12px;
  }

</style>
